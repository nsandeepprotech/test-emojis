name: ci
on: [push, pull_request]

jobs:
  install:
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2

      - name: Install ğŸ“¦
        uses: actions/checkout@v2
        
      - name: Set Cypress version ğŸ
        run: echo "hello world"

      - name: Print Cypress version ğŸ–¨
        run: echo "hello world"

      # will create folder ./public
      - name: Build site ğŸ—
        run: echo "hello world"

      # will create new JS files inside ./docs
      - name: Export Markdown specs ğŸ–¨
        run: echo "hello world"

      - name: Catch stray .only tests ğŸš¦
        run: echo "hello world"

      - name: Create Run All Spec ğŸ—
        run: echo "hello world"

      - name: Save built folders ğŸ†™
        run: echo "hello "

  test-link:
    runs-on: ubuntu-20.04
    needs: install
    steps:
      - name: Checkout ğŸ›ï¸
        run: pwd

      - name: Download built folders â¬
        run: pwd

      - name: Install ğŸ“¦
        run: pwd

      - name: Check links âš“ï¸
        run: echo "hello world"


  test-markdown:
    runs-on: ubuntu-20.04
    needs: install
    strategy:
     
      fail-fast: false
      matrix:
        # run 4 copies of the current job in parallel
        containers: [1, 2, 3, 4]
    steps:
      # https://github.com/actions/checkout
      - name: Checkout ğŸ›ï¸
        run: pwd

      - name: Download built folders â¬
        run: pwd

      # download cached ~/.npm and ~/.cache/Cypress
      # and install node_modules
      - name: Cypress tests 
        run: pwd
       
      - name: See any changed files ğŸ‘€
        run: pwd

      # if there are any updated PNG images, commit and push them
      - name: Commit any changed images ğŸ’¾
        run: pwd


  test-js:
    runs-on: ubuntu-20.04
    needs: install
    strategy:
      # when one test fails, DO NOT cancel the other
      # containers, because this will kill Cypress processes
      # leaving the Dashboard hanging ...
      # https://github.com/cypress-io/github-action/issues/48
      fail-fast: false
      matrix:
        # run 4 copies of the current job in parallel
        containers: [1, 2, 3, 4]
    steps:
      # https://github.com/actions/checkout
      - name: Checkout ğŸ›ï¸
        run: pwd

      - name: Download built folders â¬
        run: pwd

      - name: Test built site ğŸ§ª
        run: pwd

  deploy:
    runs-on: ubuntu-20.04
    needs: [install, test-link, test-markdown, test-js]
    # only deploy from the master branch
    if: github.ref == 'refs/heads/master'
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2

      - name: Download built folders â¬
        run: pwd

      - name: Install ğŸ“¦
        run: pwd


      - name: Set Cypress version ğŸ
        run: echo "hello world"


      # https://github.com/marketplace/actions/github-pages-action
      - name: Deploy
        run: pwd

      - name: Export page redirects â†—ï¸
        run: echo "hello world"

      # deploy the redirect pages that point every top level
      # HTML page the Cypress Test Runner might load to the corresponding
      # page under the latest version
      - name: Deploy redirects ğŸš€
        run: pwd
